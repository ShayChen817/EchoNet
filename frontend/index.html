<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Echonet — Task Splitter Frontend</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div class="container">
    <h1>Echonet — Task Splitter (UI Prototype)</h1>

    <label for="command">Enter a command or task description:</label>
    <textarea id="command" placeholder="e.g. Generate an English poem about autumn and translate it into Chinese"></textarea>

    <label for="fileUpload">Or upload a text file with a command (optional):</label>
    <input type="file" id="fileUpload" accept="text/*" />

    <div class="controls">
      <label for="token">User Token:</label>
      <input id="token" placeholder="X-User-Token (e.g. testtoken123)" />
      <button id="analyzeBtn">Analyze</button>
      <button id="dispatchAllBtn" disabled>Dispatch All</button>
      <label class="mock">Use Mock Responses <input type="checkbox" id="mockToggle" /></label>
    </div>

    <section id="result">
      <h2>Analysis Results</h2>
      <div id="subtasks"></div>
    </section>

    <section id="nodes_section">
      <h2>Node Cards (Completed Tasks / Logs)</h2>
      <div id="nodeCards" class="node-cards"></div>
    </section>

    <section id="final_result">
      <h2>Assistant Conversation</h2>
      <div id="chat" class="chat">
        <div id="messages" class="messages"></div>
        <div class="chat-input">
          <input id="chatInput" placeholder="Ask the assistant (e.g. summarize the text below or write a short description)" />
          <button id="chatSend">Send</button>
        </div>
      </div>
    </section>

    <section id="logs">
      <h2>Logs</h2>
      <pre id="logArea"></pre>
    </section>

    <footer>
      <small>Frontend prototype: POSTs to the backend `/analyze` to get task splits, then can dispatch individual subtasks via `/task` or `/execute_step`.</small>
    </footer>
  </div>

  <script src="app.js"></script>
</body>
</html>
